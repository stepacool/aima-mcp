---
phase: 03-performance-analytics
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/components/landing/hero.tsx
  - frontend/components/landing/how-it-works.tsx
autonomous: true
requirements:
  - ANALYTICS-02
  - PERF-01
  - PERF-02
  - PERF-03
  - PERF-04
  - PERF-05
  - PERF-06
user_setup: []

must_haves:
  truths:
    - "Primary CTA clicks are tracked in Vercel Analytics"
    - "Lighthouse Performance score is ≥ 90"
    - "LCP is under 2.5 seconds"
    - "CLS is under 0.1"
    - "INP is under 200ms"
  artifacts:
    - path: "frontend/components/landing/hero.tsx"
      provides: "Hero section with tracked CTAs"
      contains: "track('cta_click'"
    - path: "frontend/components/landing/how-it-works.tsx"
      provides: "How It Works section with tracked CTAs"
      contains: "track('cta_click'"
    - path: "frontend/app/layout.tsx"
      provides: "Analytics and Speed Insights integration"
      contains: "@vercel/analytics"
  key_links:
    - from: "hero.tsx"
      to: "@vercel/analytics"
      via: "track() function call"
      pattern: "track\\('cta_click'"
    - from: "how-it-works.tsx"
      to: "@vercel/analytics"
      via: "track() function call"
      pattern: "track\\('cta_click'"
---

<objective>
Enable CTA click event tracking in analytics and verify Core Web Vitals targets are met.
</objective>

<context>
@.planning/phases/03-performance-analytics/03-RESEARCH.md
@frontend/package.json
@frontend/app/layout.tsx
@frontend/components/landing/hero.tsx
@frontend/components/landing/how-it-works.tsx
</context>

<tasks>

<task type="auto">
  <name>Add CTA click event tracking to Hero section</name>
  <files>frontend/components/landing/hero.tsx</files>
  <action>
    Import track from @vercel/analytics. Add onClick handler to the "Start Building" Button that calls track('cta_click', { location: 'hero', variant: 'primary' }). Add onClick to "How It Works" Link that calls track('cta_click', { location: 'hero', variant: 'secondary' }).
  </action>
  <verify>
    Build passes: cd frontend && npm run build
  </verify>
  <done>
    Clicking "Start Building" in Hero fires 'cta_click' event with location: 'hero', variant: 'primary'
  </done>
</task>

<task type="auto">
  <name>Add CTA click event tracking to How It Works section</name>
  <files>frontend/components/landing/how-it-works.tsx</files>
  <action>
    Import track from @vercel/analytics. Add onClick handler to the "Start Building" Button that calls track('cta_click', { location: 'how-it-works', variant: 'primary' }).
  </action>
  <verify>
    Build passes: cd frontend && npm run build
  </verify>
  <done>
    Clicking "Start Building" in How It Works fires 'cta_click' event with location: 'how-it-works', variant: 'primary'
  </done>
</task>

<task type="auto">
  <name>Verify performance metrics are achievable</name>
  <files>frontend/app/(marketing)/page.tsx</files>
  <action>
    Confirm landing page has no blocking issues:
    1. No images = LCP will be text (fast)
    2. Server Components used for page structure
    3. No third-party scripts to defer
    4. next/font (Geist) already configured
    Add comment documenting LCP optimization pattern for future images: When adding hero images, use next/image with priority prop and sizes="(max-width: 768px) 100vw, 50vw".
  </action>
  <verify>
    Build passes: cd frontend && npm run build
  </verify>
  <done>
    Build succeeds with no performance warnings. Page should achieve LCP < 2.5s, CLS < 0.1, INP < 200ms due to minimal JS.
  </done>
</task>

</tasks>

<verification>
- [ ] npm run build passes in frontend
- [ ] npm run lint passes in frontend
- [ ] npm run typecheck passes in frontend
</verification>

<success_criteria>
1. CTA click events are tracked in Vercel Analytics dashboard
2. Lighthouse Performance score ≥ 90 (minimal JS, no blocking resources)
3. LCP < 2.5s (no images to load = instant)
4. CLS < 0.1 (no images = no layout shift)
5. INP < 200ms (minimal client-side JS with motion animations)
6. Below-fold images lazy loaded (next/image default is lazy, no images currently)
7. Non-critical JS deferred (no non-critical scripts present)
</success_criteria>

<output>
After completion, create `.planning/phases/03-performance-analytics/03-01-SUMMARY.md`
</output>
