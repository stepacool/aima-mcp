import{c as C,a as w,r as k,t as n,j as e,L as c}from"./main-De5HcHZD.js";import{u as S,a as D,d as L,e as T,k as M}from"./env-Y4CKSISW.js";function P({server:a}){let l="bg-yellow-500/20 text-yellow-400 border-yellow-500/30",i="Draft";return a.is_deployed?(l="bg-green-500/20 text-green-400 border-green-500/30",i="Active"):a.status==="ready"&&(l="bg-blue-500/20 text-blue-400 border-blue-500/30",i="Ready"),e.jsx("span",{className:`px-3 py-1 text-sm rounded-full border ${l}`,children:i})}function A({serverName:a,onConfirm:l,onCancel:i,loading:o}){return e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Server?"}),e.jsxs("p",{className:"text-slate-400 mb-6",children:["Are you sure you want to delete"," ",e.jsx("strong",{className:"text-white",children:a}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:i,disabled:o,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:l,disabled:o,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors disabled:opacity-50",children:o?"Deleting...":"Delete"})]})]})})}function J(){const{serverId:a}=C.useParams(),l=w(),[i,o]=k.useState(!1),{data:t,isLoading:x}=S({queryKey:["server",a],queryFn:()=>M({data:{serverId:a}})}),m=D({mutationFn:s=>L({data:{serverId:s}}),onSuccess:()=>{l({to:"/servers"})},onError:s=>{n.error("Failed to delete",{description:s.message}),o(!1)}});function u(){m.mutate(a)}if(x)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsx("div",{className:"text-slate-400",children:"Loading..."})});if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Server not found"}),e.jsx(c,{to:"/servers",className:"text-indigo-400 hover:text-indigo-300",children:"← Back to servers"})]})});const p=t.status==="draft",r=t.mcp_endpoint?`${T.VITE_BACKEND_URL}${t.mcp_endpoint}`:null;function h(){if(!r||!t)return null;const d=JSON.stringify({url:r}),N=btoa(d),y=t.name;return`cursor://anysphere.cursor-deeplink/mcp/install?name=${encodeURIComponent(y)}&config=${N}`}function b(){const s=h();if(!s){n.error("MCP endpoint not available");return}window.location.href=s,navigator.clipboard.writeText(s).then(()=>{n.success("Install link copied to clipboard!",{description:"Paste it into Cursor or click it to install"})})}function g(){return!r||!t?null:`claude mcp add --transport http ${t.name.replace(/\s+/g,"-").toLowerCase()} ${r}`}function v(){const s=g();if(!s){n.error("MCP endpoint not available");return}navigator.clipboard.writeText(s).then(()=>{n.success("Command copied to clipboard!",{description:"Run this command in your terminal to add the MCP server to Claude Code"})})}function f(){if(!r||!t)return null;const d={mcpServers:{[t.name.replace(/\s+/g,"-").toLowerCase()]:{type:"http",url:r}}};return JSON.stringify(d,null,2)}function j(){const s=f();if(!s){n.error("MCP endpoint not available");return}navigator.clipboard.writeText(s).then(()=>{n.success("JSON configuration copied to clipboard!",{description:"Add this to your mcp.json file"})})}return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 py-8 px-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(c,{to:"/servers",className:"text-slate-400 hover:text-white text-sm mb-4 inline-block",children:"← Back to servers"})}),e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:t.name}),e.jsx("p",{className:"text-slate-400 mt-1",children:t.description||"No description"})]}),e.jsx(P,{server:t})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-900 rounded-lg p-3",children:[e.jsx("div",{className:"text-slate-500 text-sm",children:"Tools"}),e.jsx("div",{className:"text-xl font-semibold text-white",children:t.tools.length})]}),e.jsxs("div",{className:"bg-slate-900 rounded-lg p-3",children:[e.jsx("div",{className:"text-slate-500 text-sm",children:"Auth Type"}),e.jsx("div",{className:"text-xl font-semibold text-white capitalize",children:t.auth_type})]}),e.jsxs("div",{className:"bg-slate-900 rounded-lg p-3",children:[e.jsx("div",{className:"text-slate-500 text-sm",children:"Tier"}),e.jsx("div",{className:"text-xl font-semibold text-white capitalize",children:t.tier})]}),e.jsxs("div",{className:"bg-slate-900 rounded-lg p-3",children:[e.jsx("div",{className:"text-slate-500 text-sm",children:"Created"}),e.jsx("div",{className:"text-sm font-medium text-white",children:new Date(t.created_at).toLocaleDateString()})]})]}),r&&e.jsxs("div",{className:"bg-slate-900 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-slate-500 text-sm mb-2",children:"MCP Endpoint"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-indigo-400 flex-1 truncate",children:r}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r),n.success("URL copied!")},className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-sm rounded transition-colors",children:"Copy"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[p&&e.jsx(c,{to:"/",search:{serverId:t.id},className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold rounded-lg transition-colors",children:"Continue Setup"}),t.is_deployed&&r&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:b,className:"px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 font-semibold rounded-lg border border-purple-500/30 transition-colors",children:"Add to Cursor"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 font-semibold rounded-lg border border-purple-500/30 transition-colors",children:"Add to Claude Code"}),e.jsx("button",{onClick:j,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white font-semibold rounded-lg transition-colors",children:"Copy JSON"})]}),e.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 font-semibold rounded-lg border border-red-500/30 transition-colors",children:"Delete Server"})]})]}),e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white mb-4",children:["Tools (",t.tools.length,")"]}),t.tools.length===0?e.jsx("p",{className:"text-slate-400",children:"No tools defined yet"}):e.jsx("div",{className:"space-y-3",children:t.tools.map(s=>e.jsxs("div",{className:"bg-slate-900 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white",children:s.name}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:s.description})]}),s.has_code&&e.jsx("span",{className:"text-xs text-green-400 bg-green-500/20 px-2 py-1 rounded",children:"Code ✓"})]}),s.parameters.length>0&&e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Parameters: "}),e.jsx("span",{className:"text-slate-300",children:s.parameters.map(d=>d.name).join(", ")})]})]},s.id))})]})]}),i&&e.jsx(A,{serverName:t.name,onConfirm:u,onCancel:()=>o(!1),loading:m.isPending})]})}export{J as component};
