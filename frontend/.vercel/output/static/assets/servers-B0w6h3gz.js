import{u as y,r as N,j as e,L as u,t as i}from"./main-De5HcHZD.js";import{u as C,a as v,e as b,d as w,l as k}from"./env-Y4CKSISW.js";function S({server:s}){let o="bg-yellow-500/20 text-yellow-400 border-yellow-500/30",r="Draft";return s.is_deployed?(o="bg-green-500/20 text-green-400 border-green-500/30",r="Active"):s.status==="ready"&&(o="bg-blue-500/20 text-blue-400 border-blue-500/30",r="Ready"),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${o}`,children:r})}function f({server:s,onDelete:o,deleting:r}){const m=s.status==="draft",g=s.is_deployed,l=s.mcp_endpoint?`${b.VITE_BACKEND_URL}${s.mcp_endpoint}`:null;function a(){if(!l)return null;const p=JSON.stringify({url:l}),j=btoa(p);return`cursor://anysphere.cursor-deeplink/mcp/install?name=${encodeURIComponent(s.name)}&config=${j}`}function x(){const t=a();if(!t){i.error("MCP endpoint not available");return}window.location.href=t,navigator.clipboard.writeText(t).then(()=>{i.success("Install link copied to clipboard!",{description:"Paste it into Cursor or click it to install"})})}function h(){return l?`claude mcp add --transport http ${s.name.replace(/\s+/g,"-").toLowerCase()} ${l}`:null}function d(){const t=h();if(!t){i.error("MCP endpoint not available");return}navigator.clipboard.writeText(t).then(()=>{i.success("Command copied to clipboard!",{description:"Run this command in your terminal to add the MCP server to Claude Code"})})}function c(){if(!l)return null;const p={mcpServers:{[s.name.replace(/\s+/g,"-").toLowerCase()]:{type:"http",url:l}}};return JSON.stringify(p,null,2)}function n(){const t=c();if(!t){i.error("MCP endpoint not available");return}navigator.clipboard.writeText(t).then(()=>{i.success("JSON configuration copied to clipboard!",{description:"Add this to your mcp.json file"})})}return e.jsxs(u,{to:"/server/$serverId",params:{serverId:s.id},className:"block bg-slate-800 rounded-xl border border-slate-700 p-5 hover:border-slate-600 hover:bg-slate-700/50 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name}),e.jsx("p",{className:"text-slate-400 text-sm mt-1 line-clamp-2",children:s.description||"No description"})]}),e.jsx(S,{server:s})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:[e.jsxs("span",{children:[s.tools_count," tools"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Created ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m&&e.jsx(u,{to:"/",search:{serverId:s.id},onClick:t=>t.stopPropagation(),className:"px-3 py-1.5 bg-indigo-500 hover:bg-indigo-600 text-white text-sm rounded-lg transition-colors",children:"Continue Setup"}),g&&s.mcp_endpoint&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(`${b.VITE_BACKEND_URL}${s.mcp_endpoint}`),i.success("MCP URL copied!")},className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-sm rounded-lg transition-colors",children:"Copy URL"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),n()},className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-sm rounded-lg transition-colors",children:"Copy JSON"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),x()},className:"px-3 py-1.5 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 text-sm rounded-lg border border-purple-500/30 transition-colors",children:"Add to Cursor"}),e.jsx("button",{onClick:t=>{t.stopPropagation(),d()},className:"px-3 py-1.5 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 text-sm rounded-lg border border-purple-500/30 transition-colors",children:"Add to Claude Code"})]}),e.jsx("button",{onClick:t=>{t.stopPropagation(),o(s.id)},disabled:r,className:"px-3 py-1.5 bg-red-500/20 hover:bg-red-500/30 text-red-400 text-sm rounded-lg border border-red-500/30 transition-colors disabled:opacity-50",children:r?"Deleting...":"Delete"})]})]})}function P({serverName:s,onConfirm:o,onCancel:r}){return e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Delete Server?"}),e.jsxs("p",{className:"text-slate-400 mb-6",children:["Are you sure you want to delete"," ",e.jsx("strong",{className:"text-white",children:s}),"? This action cannot be undone."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:"Delete"})]})]})})}function _(){const s=y(),[o,r]=N.useState(null),{data:m,isLoading:g}=C({queryKey:["servers"],queryFn:k}),l=m?.servers||[],a=v({mutationFn:n=>w({data:{serverId:n}}),onSuccess:()=>{s.invalidateQueries({queryKey:["servers"]}),r(null)},onError:n=>{i.error("Failed to delete",{description:n.message})}});function x(n){const t=l.find(p=>p.id===n);t&&r(t)}function h(){o&&a.mutate(o.id)}const d=l.filter(n=>n.status==="draft"),c=l.filter(n=>n.status!=="draft");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 py-8 px-4",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent",children:"My Servers"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Manage your MCP servers"})]}),e.jsx(u,{to:"/",className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold rounded-lg transition-colors",children:"+ New Server"})]}),g?e.jsx("div",{className:"text-center text-slate-400 py-12",children:"Loading..."}):l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸš€"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No servers yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Create your first MCP server to get started"}),e.jsx(u,{to:"/",className:"px-6 py-3 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold rounded-lg transition-colors inline-block",children:"Create Server"})]}):e.jsxs("div",{className:"space-y-8",children:[d.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),"Drafts (",d.length,")"]}),e.jsx("div",{className:"grid gap-4",children:d.map(n=>e.jsx(f,{server:n,onDelete:x,deleting:a.isPending&&o?.id===n.id},n.id))})]}),c.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-300 mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Servers (",c.length,")"]}),e.jsx("div",{className:"grid gap-4",children:c.map(n=>e.jsx(f,{server:n,onDelete:x,deleting:a.isPending&&o?.id===n.id},n.id))})]})]})]}),o&&e.jsx(P,{serverName:o.name,onConfirm:h,onCancel:()=>r(null)})]})}export{_ as component};
