import{S as Y,p as j,d as m,s as w,e as T,n as x,i as A,f as B,g as Z,h as P,k as q,l as ee,m as G,o as M,q as K,v as te,r as d,w as F,u as $,x as b,y as v,z as E}from"./main-De5HcHZD.js";var se=class extends Y{constructor(e,t){super(),this.options=t,this.#s=e,this.#o=null,this.#a=j(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#r=void 0;#t=void 0;#i;#n;#a;#o;#b;#d;#f;#h;#u;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),H(this.#e,this.options)?this.#l():this.updateResult(),this.#E())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return V(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return V(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#y(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof m(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#g(),this.#e.setOptions(this.options),t._defaulted&&!w(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&W(this.#e,r,this.options,t)&&this.#l(),this.updateResult(),s&&(this.#e!==r||m(this.options.enabled,this.#e)!==m(t.enabled,this.#e)||T(this.options.staleTime,this.#e)!==T(t.staleTime,this.#e))&&this.#v();const i=this.#m();s&&(this.#e!==r||m(this.options.enabled,this.#e)!==m(t.enabled,this.#e)||i!==this.#c)&&this.#S(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),r=this.createResult(t,e);return ie(this,r)&&(this.#t=r,this.#n=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t?.(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,s))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),r=this.#s.getQueryCache().build(this.#s,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#l({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#l(e){this.#g();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(x)),t}#v(){this.#R();const e=T(this.options.staleTime,this.#e);if(A||this.#t.isStale||!B(e))return;const r=Z(this.#t.dataUpdatedAt,e)+1;this.#h=P.setTimeout(()=>{this.#t.isStale||this.updateResult()},r)}#m(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#S(e){this.#y(),this.#c=e,!(A||m(this.options.enabled,this.#e)===!1||!B(this.#c)||this.#c===0)&&(this.#u=P.setInterval(()=>{(this.options.refetchIntervalInBackground||q.isFocused())&&this.#l()},this.#c))}#E(){this.#v(),this.#S(this.#m())}#R(){this.#h&&(P.clearTimeout(this.#h),this.#h=void 0)}#y(){this.#u&&(P.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#e,s=this.options,i=this.#t,c=this.#i,n=this.#n,R=e!==r?e.state:this.#r,{state:u}=e;let a={...u},y=!1,h;if(t._optimisticResults){const p=this.hasListeners(),C=!p&&H(e,t),O=p&&W(e,r,t,s);(C||O)&&(a={...a,...ee(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(a.fetchStatus="idle")}let{error:g,errorUpdatedAt:_,status:o}=a;h=a.data;let f=!1;if(t.placeholderData!==void 0&&h===void 0&&o==="pending"){let p;i?.isPlaceholderData&&t.placeholderData===n?.placeholderData?(p=i.data,f=!0):p=typeof t.placeholderData=="function"?t.placeholderData(this.#f?.state.data,this.#f):t.placeholderData,p!==void 0&&(o="success",h=G(i?.data,p,t),y=!0)}if(t.select&&h!==void 0&&!f)if(i&&h===c?.data&&t.select===this.#b)h=this.#d;else try{this.#b=t.select,h=t.select(h),h=G(i?.data,h,t),this.#d=h,this.#o=null}catch(p){this.#o=p}this.#o&&(g=this.#o,h=this.#d,_=Date.now(),o="error");const U=a.fetchStatus==="fetching",D=o==="pending",Q=o==="error",N=D&&U,k=h!==void 0,S={status:o,fetchStatus:a.fetchStatus,isPending:D,isSuccess:o==="success",isError:Q,isInitialLoading:N,isLoading:N,data:h,dataUpdatedAt:a.dataUpdatedAt,error:g,errorUpdatedAt:_,failureCount:a.fetchFailureCount,failureReason:a.fetchFailureReason,errorUpdateCount:a.errorUpdateCount,isFetched:a.dataUpdateCount>0||a.errorUpdateCount>0,isFetchedAfterMount:a.dataUpdateCount>R.dataUpdateCount||a.errorUpdateCount>R.errorUpdateCount,isFetching:U,isRefetching:U&&!D,isLoadingError:Q&&!k,isPaused:a.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:Q&&k,isStale:L(e,t),refetch:this.refetch,promise:this.#a,isEnabled:m(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const p=I=>{S.status==="error"?I.reject(S.error):S.data!==void 0&&I.resolve(S.data)},C=()=>{const I=this.#a=S.promise=j();p(I)},O=this.#a;switch(O.status){case"pending":e.queryHash===r.queryHash&&p(O);break;case"fulfilled":(S.status==="error"||S.data!==O.value)&&C();break;case"rejected":(S.status!=="error"||S.error!==O.reason)&&C();break}}return S}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#n=this.options,this.#i.data!==void 0&&(this.#f=this.#e),w(t,e))return;this.#t=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!this.#p.size)return!0;const c=new Set(i??this.#p);return this.options.throwOnError&&c.add("error"),Object.keys(this.#t).some(n=>{const l=n;return this.#t[l]!==e[l]&&c.has(l)})};this.#O({listeners:r()})}#g(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#E()}#O(e){M.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function re(e,t){return m(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function H(e,t){return re(e,t)||e.state.data!==void 0&&V(e,t,t.refetchOnMount)}function V(e,t,r){if(m(t.enabled,e)!==!1&&T(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&L(e,t)}return!1}function W(e,t,r,s){return(e!==t||m(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&L(e,r)}function L(e,t){return m(t.enabled,e)!==!1&&e.isStaleByTime(T(t.staleTime,e))}function ie(e,t){return!w(e.getCurrentResult(),t)}var ne=class extends Y{#s;#e=void 0;#r;#t;constructor(e,t){super(),this.#s=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#s.defaultMutationOptions(e),w(this.options,t)||this.#s.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&K(t.mutationKey)!==K(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#n(e)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#i(),this.#n()}mutate(e,t){return this.#t=t,this.#r?.removeObserver(this),this.#r=this.#s.getMutationCache().build(this.#s,this.options),this.#r.addObserver(this),this.#r.execute(e)}#i(){const e=this.#r?.state??te();this.#e={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#n(e){M.batch(()=>{if(this.#t&&this.hasListeners()){const t=this.#e.variables,r=this.#e.context,s={client:this.#s,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#t.onSuccess?.(e.data,t,r,s)}catch(i){Promise.reject(i)}try{this.#t.onSettled?.(e.data,null,t,r,s)}catch(i){Promise.reject(i)}}else if(e?.type==="error"){try{this.#t.onError?.(e.error,t,r,s)}catch(i){Promise.reject(i)}try{this.#t.onSettled?.(void 0,e.error,t,r,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(t=>{t(this.#e)})})}},J=d.createContext(!1),ae=()=>d.useContext(J);J.Provider;function oe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ce=d.createContext(oe()),he=()=>d.useContext(ce),ue=(e,t,r)=>{const s=r?.state.error&&typeof e.throwOnError=="function"?F(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||s)&&(t.isReset()||(e.retryOnMount=!1))},le=e=>{d.useEffect(()=>{e.clearReset()},[e])},de=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(i&&e.data===void 0||F(r,[e.error,s])),fe=e=>{if(e.suspense){const r=i=>i==="static"?i:Math.max(i??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...i)=>r(s(...i)):r(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},pe=(e,t)=>e.isLoading&&e.isFetching&&!t,be=(e,t)=>e?.suspense&&t.isPending,z=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function ve(e,t,r){const s=ae(),i=he(),c=$(),n=c.defaultQueryOptions(e);c.getDefaultOptions().queries?._experimental_beforeQuery?.(n);const l=c.getQueryCache().get(n.queryHash);n._optimisticResults=s?"isRestoring":"optimistic",fe(n),ue(n,i,l),le(i);const R=!c.getQueryCache().get(n.queryHash),[u]=d.useState(()=>new t(c,n)),a=u.getOptimisticResult(n),y=!s&&e.subscribed!==!1;if(d.useSyncExternalStore(d.useCallback(h=>{const g=y?u.subscribe(M.batchCalls(h)):x;return u.updateResult(),g},[u,y]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),d.useEffect(()=>{u.setOptions(n)},[n,u]),be(n,a))throw z(n,u,i);if(de({result:a,errorResetBoundary:i,throwOnError:n.throwOnError,query:l,suspense:n.suspense}))throw a.error;return c.getDefaultOptions().queries?._experimental_afterQuery?.(n,a),n.experimental_prefetchInRender&&!A&&pe(a,s)&&(R?z(n,u,i):l?.promise)?.catch(x).finally(()=>{u.updateResult()}),n.notifyOnChangeProps?a:u.trackResult(a)}function Te(e,t){return ve(e,se)}function _e(e,t){const r=$(),[s]=d.useState(()=>new ne(r,e));d.useEffect(()=>{s.setOptions(e)},[s,e]);const i=d.useSyncExternalStore(d.useCallback(n=>s.subscribe(M.batchCalls(n)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),c=d.useCallback((n,l)=>{s.mutate(n,l).catch(x)},[s]);if(i.error&&F(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:c,mutateAsync:i.mutate}}const Ce=b({method:"POST"}).handler(v("20ecea8294f2158adc9b747f57e5d2e5b4fd03546b8824c5554b9eefac8adea9")),Ie=b({method:"POST"}).handler(v("c0fda15e75929864f177f54e5e8294d5792bcdbe988530574f2cd6486897430b")),Pe=b({method:"POST"}).handler(v("09effb21f8e46823d03380fea19a542d6a3235d1c0a1ed8c23670c6f7949ec53")),we=b({method:"POST"}).handler(v("e3d39b5332d946ce5c426829915767cf5e584ec73ab2e1dac4ba9c43f71f2ca2")),xe=b({method:"POST"}).handler(v("6d03678a1c2be2d629c336cfe0a10cdb99a73b1af5687819f32b0da19c89b9df")),Me=b({method:"GET"}).handler(v("0cffd6209fa817f9ed662cd50c116d1e5eceb9917ec24257cea6bb920b1ebda1")),Ue=b({method:"POST"}).handler(v("3971acf857fdc77781879ff6c71d26423e0bcb6f788a10446019471bce4394ca")),De=b({method:"POST"}).handler(v("03472aabe338f62e2fc7f78b62345f374c528fdf616f1b6b4574dcaeef019750")),Qe=b({method:"GET"}).handler(v("9cd4807d65e22809d81f1aaa89df3a20732710c2f92ca81360660209aad726a5")),Ae=b({method:"GET"}).handler(v("333c2a7e1a8f06223cccea35aef6e21eeaf0250609d410915d4e5f07c0d32be8")),Ve=b({method:"GET"}).handler(v("b1d6df5d85e04231bbb8f605f039ce817862fb2c25e66eb62814c93fcfc96094")),Fe=b({method:"POST"}).handler(v("1937635825b640b99909e31eacec673b6a0c2c8207f369c69b09c3331f0546c9"));function X(e,t){if(e instanceof Promise)throw new Error(t)}function me(e,t){const r={},s=[];for(const i in e){const c=e[i]["~standard"].validate(t[i]);if(X(c,`Validation must be synchronous, but ${i} returned a Promise.`),c.issues){s.push(...c.issues.map(n=>({...n,message:n.message,path:[i,...n.path??[]]})));continue}r[i]=c.value}return s.length?{issues:s}:{value:r}}var Se={};function Ee(e){const t=e.runtimeEnvStrict??e.runtimeEnv??Se;if(e.emptyStringAsUndefined??!1)for(const[o,f]of Object.entries(t))f===""&&delete t[o];if(e.skipValidation){if(e.extends)for(const o of e.extends)o.skipValidation=!0;return t}const r=typeof e.client=="object"?e.client:{},s=typeof e.server=="object"?e.server:{},i=typeof e.shared=="object"?e.shared:{},c=e.isServer??(typeof window>"u"||"Deno"in window),n=c?{...s,...i,...r}:{...r,...i},l=e.createFinalSchema?.(n,c)?.["~standard"].validate(t)??me(n,t);X(l,"Validation must be synchronous");const R=e.onValidationError??(o=>{throw console.error("❌ Invalid environment variables:",o),new Error("Invalid environment variables")}),u=e.onInvalidAccess??(()=>{throw new Error("❌ Attempted to access a server-side environment variable on the client")});if(l.issues)return R(l.issues);const a=o=>e.clientPrefix?!o.startsWith(e.clientPrefix)&&!(o in i):!0,y=o=>c||!a(o),h=o=>o==="__esModule"||o==="$$typeof",g=(e.extends??[]).reduce((o,f)=>Object.assign(o,f),{}),_=Object.assign(g,l.value);return new Proxy(_,{get(o,f){if(typeof f=="string"&&!h(f))return y(f)?Reflect.get(o,f):u(f)}})}const Re={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,TSS_CLIENT_OUTPUT_DIR:"dist/client",TSS_DEV_SERVER:"false",TSS_ROUTER_BASEPATH:"",TSS_SERVER_FN_BASE:"/_serverFn/",VITE_SENTRY_DSN:"",VITE_SENTRY_ORG:"",VITE_SENTRY_PROJECT:""};var ye={};const Le=Ee({server:{SERVER_URL:E().url().optional(),BETTER_AUTH_SECRET:E().min(32).optional(),GOOGLE_CLIENT_ID:E().min(1).optional(),GOOGLE_CLIENT_SECRET:E().min(1).optional()},clientPrefix:"VITE_",client:{VITE_APP_TITLE:E().min(1).optional(),VITE_BACKEND_URL:E().url(),VITE_SENTRY_DSN:E().optional(),VITE_BETTER_AUTH_SECRET:E().min(32).optional()},runtimeEnv:{...ye,...Re},emptyStringAsUndefined:!0});export{_e as a,we as b,Pe as c,Fe as d,Le as e,Ue as f,xe as g,De as h,Me as i,Qe as j,Ve as k,Ae as l,Ie as r,Ce as s,Te as u};
