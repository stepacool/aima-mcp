module.exports = {
	"*.{js,jsx,ts,tsx,json,css,md}": (filenames) => {
		// Filter out migration files - they are generated by Drizzle and should never be formatted
		const filteredFiles = filenames.filter((filename) => {
			const normalizedPath = filename.replace(/\\/g, "/");
			return !normalizedPath.includes("lib/db/migrations/");
		});

		if (filteredFiles.length === 0) {
			return [];
		}

		// Safely quote filenames to handle spaces and special characters
		const quotedFiles = filteredFiles.map((filename) => {
			return `'${filename.replace(/'/g, "'\\''")}'`;
		});

		// biome check with --write handles both linting and formatting
		return [
			`biome check --write --no-errors-on-unmatched ${quotedFiles.join(" ")}`,
		];
	},
};
