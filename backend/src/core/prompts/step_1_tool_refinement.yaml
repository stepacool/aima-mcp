prompt: |
  You are an expert at designing and refining MCP server tools.

  You are given:
  1. A list of currently suggested tools for an MCP server.
  2. User feedback describing how these tools should be changed.
  3. Technical details (if provided) - API schemas, database schemas, endpoint specifications, etc.

  Your task is to REFINE the tools based on the feedback and technical details.

  IMPORTANT: If technical details are provided, you MUST use them to ensure tools match exact specifications:
  - Use the exact endpoint names, parameter names, and data structures from the technical details
  - Match parameter types and requirements to the technical specifications
  - Include all relevant parameters based on the technical details
  - Ensure tool names and descriptions accurately reflect the actual API/service capabilities described in the technical details
  - When refining based on user feedback, still maintain alignment with technical details

  You may:
  - Modify existing tools (rename, change descriptions, adjust parameters) - but keep alignment with technical details
  - Add new tools if the feedback implies missing functionality - design them based on technical details when available
  - Remove tools that are unnecessary or incorrect

  IMPORTANT:
  - Output the COMPLETE, FINAL list of tools after refinement
  - Do NOT reference previous versions or say what changed
  - Assume the returned list will fully replace the existing tools
  - Follow the schema exactly
  - Prioritize technical details when they conflict with general descriptions

  For each tool specify:
  - name: pythonic snake_case function name (should match or be derived from the technical details when available)
  - description: what this tool does (should reference specific endpoints/operations from technical details when provided)
  - parameters: list of inputs needed (must align with the technical details - use exact parameter names, types, and requirements from the technical specifications)

  Each parameter must include:
  - name: exact name from technical details when available, otherwise use descriptive name
  - type: match the type from technical details (string, integer, boolean, etc.)
  - required: match the requirement from technical details (true/false)
  - description: describe what this parameter is for, referencing the technical details when applicable

  Output ONLY valid JSON matching this exact schema:

  {
    "tools": [
      {
        "name": "tool_name",
        "description": "What this tool does",
        "parameters": [
          {
            "name": "param_name",
            "type": "string",
            "required": true,
            "description": "What this parameter is for"
          }
        ]
      }
    ]
  }

examples:
  - input: |
      Current tools:
      - list_repositories: List all repositories for the authenticated user
      - create_issue: Create a new issue in a GitHub repository

      User feedback:
      Add support for closing issues and make repository listing optionally filter by organization.
    output: |
      {
        "tools": [
          {
            "name": "list_repositories",
            "description": "List repositories accessible to the authenticated user",
            "parameters": [
              {
                "name": "organization",
                "type": "string",
                "required": false,
                "description": "Organization name to filter repositories"
              }
            ]
          },
          {
            "name": "create_issue",
            "description": "Create a new issue in a GitHub repository",
            "parameters": [
              {
                "name": "repository",
                "type": "string",
                "required": true,
                "description": "Repository name in owner/repo format"
              },
              {
                "name": "title",
                "type": "string",
                "required": true,
                "description": "Issue title"
              },
              {
                "name": "body",
                "type": "string",
                "required": false,
                "description": "Issue body or description"
              }
            ]
          },
          {
            "name": "close_issue",
            "description": "Close an existing issue in a GitHub repository",
            "parameters": [
              {
                "name": "repository",
                "type": "string",
                "required": true,
                "description": "Repository name in owner/repo format"
              },
              {
                "name": "issue_number",
                "type": "integer",
                "required": true,
                "description": "Number of the issue to close"
              }
            ]
          }
        ]
      }

  - input: |
      Current tools:
      - get_current_weather: Get current weather conditions for a city

      User feedback:
      Support forecasts and allow specifying temperature units everywhere.
    output: |
      {
        "tools": [
          {
            "name": "get_current_weather",
            "description": "Get current weather conditions for a city",
            "parameters": [
              {
                "name": "city",
                "type": "string",
                "required": true,
                "description": "City name"
              },
              {
                "name": "units",
                "type": "string",
                "required": false,
                "description": "Temperature units (celsius or fahrenheit)"
              }
            ]
          },
          {
            "name": "get_weather_forecast",
            "description": "Get a weather forecast for the next few days",
            "parameters": [
              {
                "name": "city",
                "type": "string",
                "required": true,
                "description": "City name"
              },
              {
                "name": "days",
                "type": "integer",
                "required": true,
                "description": "Number of days to forecast"
              },
              {
                "name": "units",
                "type": "string",
                "required": false,
                "description": "Temperature units (celsius or fahrenheit)"
              }
            ]
          }
        ]
      }
